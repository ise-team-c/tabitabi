<!-- index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}"> <!-- 外部スタイルシートを読み込み -->
    <!-- 追加: Font AwesomeのCDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" integrity="sha512-XXX" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="{{ url_for('static', filename='top.js') }}"></script>
</head>
<body>

    <div id="left-panel">
        <div class="bookmark-container" id="plansContainer">
            <div class="box-around-h2">
                <h2>あなたの旅</h2>
            </div>
            {% for plan in plans: %}
                <a href="#" class="bookmark-link" onclick="showPlan(plan, 'あなたの旅')">
                    {{ plan }} <i class="fas fa-chevron-right"></i>
                </a></br>
            {% endfor %}
            <button class="bookmark-button" onclick="addNewPlan()">
                新たな旅 <i class="fas fa-chevron-right"></i>
            </button>
        </div>
        <div class="bookmark-container" id="travelCompanionPlans">
            <div class="box-around-h2">
                <h2>旅仲間の旅</h2>
            </div>
            <!-- Updated onclick functions to pass the plans dynamically -->
            {% for plan_of_other_user in plans_of_other_user: %}
            <a href="#" class="bookmark-link" onclick="showCompanionPlans(plan_of_other_user, '京都へ行こう')">
                {{ plan_of_other_user }} <i class="fas fa-chevron-right"></i>
            </a></br>
            {% endfor %}
            <!-- <a href="#" class="bookmark-link" onclick="showCompanionPlans('京都グルメ', '京都へ行こう')">
                京都グルメ <i class="fas fa-chevron-right"></i>
            </a></br>
            <a href="#" class="bookmark-link" onclick="showCompanionPlans('大阪ユニバを楽しむ', '大阪グリコ', '大阪たこやき')">
                大阪 <i class="fas fa-chevron-right"></i>
            </a></br>
            <a href="#" class="bookmark-link" onclick="showCompanionPlans('イタリアピザ', 'イタリアおいしい', 'イタリアパスタ')">
                イタリア <i class="fas fa-chevron-right"></i>
            </a></br>
            <a href="#" class="bookmark-link" onclick="showCompanionPlans('東京タワー', '浅草', '東京温泉')">
                東京 <i class="fas fa-chevron-right"></i>
            </a></br>
            <a href="#" class="bookmark-link" onclick="showCompanionPlans('フランス美術館巡り', 'フランスモンサンミシェル')">
                フランス <i class="fas fa-chevron-right"></i>
            </a></br> -->

        </div>
        <input type="text" placeholder="検索..." oninput="filterTravelCompanionPlans()" id="searchInput">
    </div>

    <div id="right-panel">
        <center><h2 id="planTitle">京都旅行2023</h2></center>

        {% for date in dates: %}
        <div class="date-bookmark-container kyoto-travel-container" data-day="6">
            <div class="box-around-h2">
                <h2>{{date}}のしおり</h2>
                <a href="別のページのURL" class="bookmark-link right-align">    詳細ページへ <i class="fas fa-caret-square-left"></i></a>
            </div>
            <div class="bookmark-content">
            {% for event in plan_info[date]: %}
                <p>{{event["start_time"]}}-{{event["end_time"]}} {{event["event_name"]}}</p>
            {% endfor %}
            </div>
        </div>
        {% endfor %}

        <div class="recommendations-container">
            <div class="box-around-h2">
                <h2>あなたへのおすすめ旅</h2>
                <a href="別のページのURL" class="bookmark-link right-align">詳細ページへ <i class="fas fa-chevron-right"></i></a>
            </div>
            <p id="companionPlans">京都温泉<br>京都グルメ<br>京都へ行こう</br>京都スイーツ</br>京都見るべきTop10<br><br></p>
        </div>
    </div>

    <script>
        function showCompanionPlans(...plans) {
            const companionPlans = document.getElementById('companionPlans');
            companionPlans.innerHTML = plans.join('<br>');
        }

        function filterTravelCompanionPlans() {
            const searchInput = document.getElementById('searchInput').value.toLowerCase();
            const travelCompanionPlansContainer = document.querySelector('#travelCompanionPlans');

            // Clear existing plan items
            while (travelCompanionPlansContainer.firstChild) {
                travelCompanionPlansContainer.removeChild(travelCompanionPlansContainer.firstChild);
            }

            // Get the plans based on the search input
            const filteredPlans = getFilteredPlans(searchInput);

            // Display the filtered plans
            const titleDiv = document.createElement('div');
            titleDiv.className = 'box-around-h2';
            const titleH2 = document.createElement('h2');
            titleH2.innerText = "旅仲間の旅";
            titleDiv.appendChild(titleH2);
            travelCompanionPlansContainer.appendChild(titleDiv);

            filteredPlans.forEach(p => {
                const planItem = document.createElement('a');
                planItem.href = "#";
                planItem.className = "bookmark-link";
                planItem.innerHTML = `${p} <i class='fas fa-chevron-right'></i>`;
                planItem.onclick = function () {
                    showCompanionPlans(p);
                };

                travelCompanionPlansContainer.appendChild(planItem);
            });
        }

        // function getFilteredPlans(searchInput) {
        //     // Define your plans or retrieve them dynamically
        //     const allPlans = ["京都グルメ", "京都へ行こう", "大阪ユニバを楽しむ", "大阪グリコ", "大阪たこやき", "イタリアピザ", "イタリアおいしい", "イタリアパスタ", "東京タワー", "浅草", "東京温泉", "フランス美術館巡り", "フランスモンサンミシェル"];

        //     // Filter plans based on the search input
        //     const filteredPlans = allPlans.filter(plan => plan.toLowerCase().includes(searchInput));

        //     return filteredPlans;
        // }
    </script>

</body>
</html>
